<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>The APSR, CPSR, SPSR, and the Difference Between Them | Nintendo 3DS ARM Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="./vfp/README.html" />
    
    
    <link rel="prev" href="./apsr_and_cpsr_flags.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book"  data-level="1.3.1" data-basepath="." data-revision="1431557304855">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.1" data-path="about_the_3ds.html">
            
                
                    <a href="./about_the_3ds.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.</b>
                        
                         About the 3DS CPU(s)
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="0.2" data-path="terminology.html">
            
                
                    <a href="./terminology.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.2.</b>
                        
                         Terminology
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="arm11_mpcore/README.html">
            
                
                    <a href="./arm11_mpcore/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         ARM11 MPCore
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="registers.html">
            
                
                    <a href="./registers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Core Registers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="privilege_modes.html">
            
                
                    <a href="./privilege_modes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         Privilege Modes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="apsr_and_cpsr_flags.html">
            
                
                    <a href="./apsr_and_cpsr_flags.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         APSR and CPSR Flags
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter active" data-level="1.3.1" data-path="the_apsr,_cpsr,_and_the_difference_between_them.html">
            
                
                    <a href="./the_apsr,_cpsr,_and_the_difference_between_them.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.1.</b>
                        
                         The APSR, CPSR, SPSR, and the Difference Between Them
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="vfp/README.html">
            
                
                    <a href="./vfp/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         VFP
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.4.1" data-path="vfp/vfp_registers.html">
            
                
                    <a href="./vfp/vfp_registers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.</b>
                        
                         VFP Registers
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.4.1.1" data-path="vfp/vfp_system_registers.html">
            
                
                    <a href="./vfp/vfp_system_registers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.1.</b>
                        
                         VFP System Registers
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.4.1.1.1" data-path="vfp/fpsid.html">
            
                
                    <a href="./vfp/fpsid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.1.1.</b>
                        
                         FPSID
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.1.1.2" data-path="vfp/fpscr.html">
            
                
                    <a href="./vfp/fpscr.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.1.2.</b>
                        
                         FPSCR
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.4.2" data-path="vfp/enabling_flush-to-zero_mode.html">
            
                
                    <a href="./vfp/enabling_flush-to-zero_mode.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.2.</b>
                        
                         Flush-To-Zero Mode
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.3" data-path="vfp/default_nan.html">
            
                
                    <a href="./vfp/default_nan.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.3.</b>
                        
                         Default NaN Mode
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <a href="./GLOSSARY.html" class="btn pull-left" aria-label="Open Glossary"><i class="fa fa-sort-alpha-asc"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Nintendo 3DS ARM Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_140">
                    
                        <h1 id="the-apsr-cpsr-spsr-and-the-difference-between-them">The APSR, CPSR, SPSR, and the Difference Between Them</h1>
<h4 id="apsr--application-program-status-register">APSR – Application Program Status Register</h4>
<ul>
<li>Only holds copies of the ALU status flags (AKA condition code flags).</li>
<li>Flags here determine whether or not an instruction is executed, with two exceptions<ul>
<li>On ARMv6 and later, GE (Greater than or Equal) flags are present. These are used by the SEL instruction to perform byte selection.</li>
<li>On ARMv5TE, ARMv6 or later, the Q flag is present. This is set by saturation instructions</li>
</ul>
</li>
</ul>
<p>The APSR on the ARM11 MPCore takes the form:</p>
<table>
<thead>
<tr>
<th>31</th>
<th>30</th>
<th>29</th>
<th>28</th>
<th>27</th>
<th style="text-align:center">26 - 24</th>
<th style="text-align:center">23 - 20</th>
<th>19 - 16</th>
<th style="text-align:center">15 - 0</th>
</tr>
</thead>
<tbody>
<tr>
<td>N</td>
<td>Z</td>
<td>C</td>
<td>V</td>
<td>Q</td>
<td style="text-align:center">RAZ/SBZP</td>
<td style="text-align:center">Reserved/UNK/SBZP</td>
<td>GE</td>
<td style="text-align:center">Reserved/UNK/SBZP</td>
</tr>
</tbody>
</table>
<p><br/></p>
<h4 id="cpsr--current-program-status-register">CPSR – Current Program Status Register</h4>
<ul>
<li>Contains:<ul>
<li>The APSR flags</li>
<li>Current instruction set state</li>
<li>Execution state bits for the Thumb If-Then (IT) instruction (RAZ in the 3DS ARM processors; not capable of executing IT).</li>
<li>Current endianness (E bit, bit 9)</li>
<li>Current processor mode (bits 0 - 4)</li>
<li>Interrupt and asynchronous abort disable bits</li>
</ul>
</li>
</ul>
<p>The CPSR on the ARM11 MPCore takes the form:</p>
<table>
<thead>
<tr>
<th>31</th>
<th>30</th>
<th>29</th>
<th>28</th>
<th>27</th>
<th style="text-align:center">26 - 25</th>
<th>24</th>
<th style="text-align:center">23 - 20</th>
<th>19 - 16</th>
<th style="text-align:center">15 - 10</th>
<th>9</th>
<th>8</th>
<th>7</th>
<th>6</th>
<th>5</th>
<th style="text-align:center">4 - 0</th>
</tr>
</thead>
<tbody>
<tr>
<td>N</td>
<td>Z</td>
<td>C</td>
<td>V</td>
<td>Q</td>
<td style="text-align:center">RAZ</td>
<td>J</td>
<td style="text-align:center">Reserved/UNK/SBZP</td>
<td>GE</td>
<td style="text-align:center">RAZ</td>
<td>E</td>
<td>A</td>
<td>I</td>
<td>F</td>
<td>T</td>
<td style="text-align:center">M[4:0]</td>
</tr>
</tbody>
</table>
<p><br/></p>
<h4 id="spsr--saved-program-status-register">SPSR – Saved Program Status Register</h4>
<ul>
<li>All processor modes except system and user mode have an SPSR.</li>
<li>Records the pre-exception value of the CPSR.</li>
<li>Upon taking an exception, the CPSR is copied to the SPSR of the processor mode the exception is taken to.<ul>
<li>This is useful because the exception handler is able to restore the CPSR to the value prior to taking the exception, as well as being able to examine the CPSR in general.</li>
</ul>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./apsr_and_cpsr_flags.html" class="navigation navigation-prev " aria-label="Previous page: APSR and CPSR Flags"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./vfp/README.html" class="navigation navigation-next " aria-label="Next page: VFP"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
